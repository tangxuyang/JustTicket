<?xml version="1.0" encoding="utf-8" ?>
<Actions>
  <!--<DownFile RandomFileName="true">
    <Url>https://kyfw.12306.cn/otn/passcodeNew/getPassCodeNew?module=login&amp;rand=sjrand</Url>
    <Method>Get</Method>
    <FileName>.png</FileName>
  </DownFile>

  <ConsoleOutput>
    <Text>text</Text>
    <DefaultText>defaultText</DefaultText>
    <IgnoreText>ignoreText</IgnoreText>
    <Age>13</Age>
  </ConsoleOutput>-->
  
  
  <!--<GlobalVariables>
    <Name>txy</Name>
    <Age>21</Age>
    <Male>True</Male>
    <Name2></Name2>
  </GlobalVariables>
  <ConsoleOutput Text="My name is {Name}, and i am {Age} years old"></ConsoleOutput>
  <ConsoleOutput Text="{Age}"></ConsoleOutput>
  <ConsoleOutput Text="{Male}"></ConsoleOutput>
  <For IterateCount="5">
    <RequestFile RandomFileName="true" Name="dfa">
      <Url>https://kyfw.12306.cn/otn/passcodeNew/getPassCodeNew?module=login&amp;rand=sjrand</Url>
      <Method>Get</Method>
      <FileName>{Name2}.png</FileName>
    </RequestFile>
    <Assignment>
      <Variable>Name</Variable>
      <Value>$dfa.OutputFileName</Value>
    </Assignment>
    <ConsoleOutput>
      <Text>{Name}</Text>
    </ConsoleOutput>
  </For>
  <ConsoleInput Name="input">
    
  </ConsoleInput>
  <ConsoleOutput Name="ss">
    <Text>{Name}</Text>
  </ConsoleOutput>
  <Assignment>
    <Variable>Name</Variable>
    <Value>$input.OutputString</Value>
  </Assignment>
  <ConsoleOutput>
    <Text>{Name}</Text>
  </ConsoleOutput>-->

  <GlobalVariables>
    <Name2></Name2>
    <VerificationCode></VerificationCode>
    <Result></Result>
  </GlobalVariables>
  <For IterateCount="1">
    <GlobalVariables>
      <LocalResult></LocalResult>
    </GlobalVariables>
    <RequestFile RandomFileName="true" Name="dfa">
      <Url>https://kyfw.12306.cn/otn/passcodeNew/getPassCodeNew?module=login&amp;rand=sjrand</Url>
      <Method>Get</Method>
      <FileName>.png</FileName>
    </RequestFile>
    <Assignment>
      <Variable>Name2</Variable>
      <Value>$dfa.OutputFileName</Value>
    </Assignment>
    <ShowImage>
      <FileName>{Name2}</FileName>
    </ShowImage>
    <ConsoleInput Name="input">
      <Text>Please input Verification code...</Text>
    </ConsoleInput>
    <Assignment>
      <Variable>VerificationCode</Variable>
      <Value>$input.OutputString</Value>
    </Assignment>
    <RequestString Name="login">
      <Url>https://kyfw.12306.cn/otn/login/loginAysnSuggest</Url>
      <Method>Post</Method>
      <RequestBody>loginUserDTO.user_name=txyzqc&amp;userDTO.password=1qaz2wsx&amp;randCode={VerificationCode}</RequestBody>
    </RequestString>
    <Assignment>
      <Variable>Result</Variable>
      <Value>$login.Result</Value>
    </Assignment>
    <StringReplace Name="sr">
      <SourceString>{Result}</SourceString>
      <OldString>&quot;</OldString>
      <NewString>\&quot;</NewString>
    </StringReplace>
    <Assignment>
      <Variable>LocalResult</Variable>
      <Value>$sr.ResultString</Value>
    </Assignment>
    <If Condition="&quot;{LocalResult}&quot;.Contains(&quot;\&quot;loginCheck\&quot;:\&quot;Y\&quot;&quot;)">
      <Begin>
        <ConsoleOutput>
          <Text>Login ...</Text>
        </ConsoleOutput>
      </Begin>
      <Else>
        <ConsoleOutput>
          <Text>Login failed...</Text>
        </ConsoleOutput>
      </Else>
    </If>
    <!--<ConsoleOutput>
      <Text>{Result}</Text>
    </ConsoleOutput>-->
  </For>

  <!--<GlobalVariables>
    <Age>20</Age>
  </GlobalVariables>
  <Assignment>
    <Variable>Age</Variable>
    <Value>9</Value>
  </Assignment>
  <If Condition="{Age}>10">
    <Begin>
      <ConsoleOutput>
        <Text>If true</Text>
      </ConsoleOutput>
      <ConsoleOutput>
        <Text>Hello world</Text>
      </ConsoleOutput>
    </Begin>
    <Else>
      <ConsoleOutput>
        <Text>If false</Text>
      </ConsoleOutput>
      <ConsoleOutput>
        <Text>bye!!</Text>
      </ConsoleOutput>
    </Else>
  </If>-->
</Actions>